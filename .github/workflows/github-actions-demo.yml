name: ci

on:
    push:

env:
    CONFIG_FILE: ./.cicd/odoo/etc/odoo.conf
    ODOO_CUSTOM_ADDONS_PATH: .
jobs:
    buildx:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4
            - name: Update config before run pylint
              run: |
                  bash ./.cicd/scripts/build.sh "pylint"
                  cat $CONFIG_FILE
            - uses: isbang/compose-action@v1.5.1
              with:
                  compose-file: "./.cicd/odoo/docker-compose.yml"
                  up-flags: "--build"
                  down-flags: "--volumes"

            # - name: Set up Docker Buildx
            #   uses: docker/setup-buildx-action@v3
            #   with:
            #       buildkitd-flags: --debug
            # - run: |
            #       docker ps -a
            # - run: docker --version
            # - name: Build
            #   uses: docker/build-push-action@v5
            #   with:
            #       context: .
